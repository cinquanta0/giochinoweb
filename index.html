<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gioco dei Numeri</title>
  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(to right, #2c3e50, #3498db);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
      height: 100vh;
      justify-content: center;
      text-align: center;
      margin: 0;
      animation: background-animation 20s infinite alternate;
      overflow: hidden;
    }

    @keyframes background-animation {
      0% { background: linear-gradient(to right, #2c3e50, #3498db); }
      50% { background: linear-gradient(to right, #f39c12, #e74c3c); }
      100% { background: linear-gradient(to right, #8e44ad, #2980b9); }
    }

    h1 {
      font-family: 'Bangers', cursive;
      font-size: 5rem;
      margin: 0 0 40px;
      text-shadow: 4px 4px 15px rgba(0,0,0,0.5);
      color: #FF6347;
      text-transform: uppercase;
    }

    .container {
      background: rgba(255, 255, 255, 0.1);
      padding: 40px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      text-align: center;
      width: 320px;
      animation: fadeIn 1s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    input[type=number], button {
      padding: 15px;
      margin: 10px 0;
      font-size: 1.2rem;
      border-radius: 12px;
      border: none;
      outline: none;
    }

    input[type=number] {
      width: 100%;
    }

    button {
      background: #00fff2;
      color: black;
      cursor: pointer;
      font-weight: bold;
      border: 2px solid #00cfc4;
      font-size: 1.2rem;
    }

    button:hover {
      background: #00cfc4;
    }

    #message {
      margin-top: 20px;
      font-size: 1.5rem;
      font-weight: bold;
      color: #f39c12;
    }

    #tentativi {
      color: yellow;
      font-weight: bold;
    }

    .hidden {
      display: none;
    }

    .music-btn, .home-btn {
      position: fixed;
      top: 20px;
      padding: 10px 20px;
      font-size: 1.2rem;
      border-radius: 20px;
      font-weight: bold;
      cursor: pointer;
      border: none;
    }

    .music-btn {
      right: 20px;
      background: #e74c3c;
      color: white;
    }

    .home-btn {
      left: 20px;
      background: #f39c12;
      color: black;
    }

    .home-btn:hover, .music-btn:hover {
      opacity: 0.9;
    }
  </style>
</head>
<body>

  <button onclick="goHome()" class="home-btn">üè† Home</button>
  <button onclick="toggleMusic()" class="music-btn">üéµ Musica</button>

  <audio id="bgMusic" src="musica.mp3" loop></audio>
  <audio id="winSound" src="win.mp3"></audio>
  <audio id="loseSound" src="lose.mp3"></audio>

  <!-- Intro -->
  <div id="intro">
    <h1>üéâ Benvenuto!</h1>
    <div class="container">
      <h2>üéØ Gioco dei Numeri üéØ</h2>
      <p>Devi indovinare un numero segreto. </p>
      <p>Hai <strong>5 tentativi</strong> per ogni livello.</p>
      <p>Ci sono <strong>10 livelli</strong> sempre pi√π difficili. Da 0 a 1000!</p>
      <p>Buona fortuna, campione! üí™</p>
      <p>Scegli la modalit√† di difficolt√†:</p>
      <button onclick="startGame('easy')">Facile</button>
   <button onclick="startGame('hard')">Difficile</button>
    </div>
  </div>

  <!-- Gioco -->
  <div id="game" class="hidden">
    <div class="container">
      <h2>üî¢ Livello <span id="livelloCorrente">1</span> (da 0 a <span id="maxNumber">10</span>)</h2>
      <p>Inserisci un numero:</p>
      <input type="number" id="userGuess" min="0" />
      <button onclick="check()">Verifica</button>
      <p>Tentativi rimasti: <span id="tentativi">5</span></p>
      <p id="message"></p>
      <button id="retryBtn" class="hidden" onclick="retry()">üîÅ Riprova</button>
      <p id="timer" class="hidden">Tempo rimanente: <span id="timerValue">10</span> secondi</p>
    </div>
  </div>

  <script>
    let currentLevel = 1;
    let numeroSegreto = 0;
    let tentativiRimasti = 5;
    let score = 0;
    let timerInterval;
    let timerValue = 10;
    let gameMode = 'easy'; // Default difficulty

    // Inizia il gioco
    function startGame(mode) {
      gameMode = mode;
      document.getElementById("intro").classList.add("hidden");
      document.getElementById("game").classList.remove("hidden");
      avviaLivello();
    }

    // Imposta il livello e il numero segreto
    function avviaLivello() {
      const maxNumber = livelloMax(currentLevel);
      numeroSegreto = Math.floor(Math.random() * (maxNumber + 1));
      tentativiRimasti = 5;
      document.getElementById("tentativi").textContent = tentativiRimasti;
      document.getElementById("livelloCorrente").textContent = currentLevel;
      document.getElementById("maxNumber").textContent = maxNumber;
      document.getElementById("message").textContent = '';
      document.getElementById("retryBtn").classList.add("hidden");
      document.getElementById("userGuess").value = '';

      if (gameMode === 'hard') {
        startTimer();
      }
    }

    // Imposta la difficolt√† per ogni livello
    function livelloMax(livello) {
      const valori = [10, 20, 30, 50, 70, 100, 150, 200, 500, 1000];
      return valori[livello - 1] || 1000;  // Se il livello √® superiore a 10, imposta 1000
    }

    // Avvia il timer nella modalit√† difficile
    function startTimer() {
      document.getElementById("timer").classList.remove("hidden");
      timerValue = 50;
      document.getElementById("timerValue").textContent = timerValue;

      timerInterval = setInterval(function() {
        timerValue--;
        document.getElementById("timerValue").textContent = timerValue;
        if (timerValue <= 0) {
          clearInterval(timerInterval);
          document.getElementById("message").textContent = "‚ùå Tempo scaduto! Il numero era " + numeroSegreto;
          document.getElementById("retryBtn").classList.remove("hidden");
        }
      }, 1000);
    }

    // Controlla la risposta dell'utente
    function check() {
      const guess = parseInt(document.getElementById("userGuess").value);
      if (isNaN(guess)) return;

      if (gameMode === 'hard') {
        clearInterval(timerInterval);
      }

      if (guess === numeroSegreto) {
        score += 10;  // Aggiungi punti per la risposta corretta
        document.getElementById("message").textContent = "üéâ Bravo! Passi al prossimo livello!";
        document.getElementById("winSound").play();
        setTimeout(() => {
          if (currentLevel < 10) {
            currentLevel++;
            avviaLivello();
          } else {
            document.getElementById("message").textContent = `üèÜ Complimenti! Hai completato tutti i livelli! Punteggio finale: ${score}`;
          }
        }, 1500);
      } else {
        tentativiRimasti--;
        document.getElementById("tentativi").textContent = tentativiRimasti;
        if (tentativiRimasti === 0) {
          document.getElementById("message").textContent = "‚ùå Hai perso! Il numero era " + numeroSegreto;
          document.getElementById("retryBtn").classList.remove("hidden");
          document.getElementById("loseSound").play();
        } else {
          document.getElementById("message").textContent = guess < numeroSegreto ? "üìâ Troppo basso!" : "üìà Troppo alto!";
        }
      }
    }

    // Riprova
    function retry() {
      avviaLivello();
    }

    // Torna alla home
    function goHome() {
      document.getElementById("game").classList.add("hidden");
      document.getElementById("intro").classList.remove("hidden");
      currentLevel = 1;
      score = 0;
      clearInterval(timerInterval);  // Clear timer when going back home
    }

    // Toggle della musica
    function toggleMusic() {
      const music = document.getElementById("bgMusic");
      if (music.paused) music.play();
      else music.pause();
    }
  </script>
</body>
</html>
